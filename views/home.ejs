<%- include('header', {rol: rol, pg: "inicio"}) %>

<div class="container-fluid">
    <div class="row">
        <!-- Bienvenida -->
        <div class="col-12 bg-light border-bottom border-2 border-secondary">
            <h1 class="h1 text-center py-4">¡Bienvenido, <%- nombre %>!</h1>
        </div>
        
        <!-- Eventos próximos -->
        <div class="col-md-6 p-4">
            <div class="m-4 text-center">
                <h2>Calendario de Eventos</h2>
                <button class="btn btn-outline-secondary text-center mb-4" type="button"> Mostrar Calendario </button>
                <h3 class="text-center text-decoration-underline mb-3">Próximos eventos</h3>
                <div class="eventTable table-responsive">
                    <table class="table fs-5 border text-center table-striped">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Fecha</th>
                                <th>Más información</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (proximos && proximos.length > 0) { %>
                                <% proximos.forEach(evento => { %>
                                    <tr>
                                        <td><%= evento.título %></td>
                                        <td><%= evento.fecha %></td>
                                        <td><a href='/evento/<%= evento.ID %>' class="btn btn-primary" role="button">Ver evento</a></td>
                                    </tr>
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="3" class="text-center">No hay eventos próximos</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Buscador de eventos -->
        <div class="col-md-6 p-4">
            <div class="m-4">
                <h2 class="text-center">Buscador de Eventos</h2>
                <div class="text-center mb-3">
                    <button class="btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#buscadorCollapse" aria-expanded="false" aria-controls="buscadorCollapse">
                        Mostrar Buscador
                    </button>
                </div>
                <div class="collapse" id="buscadorCollapse">
                    <form action="/home" method="GET" class="mb-3">
                        <div class="mb-2">
                            <label for="titulo" class="form-label fw-bold">Título</label>
                            <input type="text" id="titulo" name="titulo" class="form-control" placeholder="Buscar por título" />
                        </div>
                        <div class="mb-2">
                            <label for="fecha" class="form-label fw-bold">Fecha</label>
                            <input type="date" id="fecha" name="fecha" class="form-control" />
                        </div>
                        <div class="mb-3">
                            <p class="mb-1 fw-bold">Estado de los eventos</p>
                            <div class="form-check">
                                <input type="radio" id="ninguno" name="estado" value="ninguno" class="form-check-input" checked />
                                <label for="ninguno" class="form-check-label">Todos los eventos</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="llenos" name="estado" value="llenos" class="form-check-input" />
                                <label for="llenos" class="form-check-label">Solo eventos llenos</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" id="disponibles" name="estado" value="disponibles" class="form-check-input" />
                                <label for="disponibles" class="form-check-label">Solo eventos disponibles</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Buscar</button>
                    </form>
                </div>
            </div>
            
            <div class="m-4">
                <h3 class="text-center text-decoration-underline">Resultados</h3>
                <div class="eventTable table-responsive">
                    <table class="table fs-5 border text-center table-striped">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Fecha</th>
                                <th>Más información</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (resultados && resultados.length > 0) { %>
                                <% resultados.forEach(evento => { %>
                                    <tr>
                                        <td><%= evento.título %></td>
                                        <td><%= evento.fecha %></td>
                                        <td><a href='/evento/<%= evento.ID %>' class="btn btn-primary" role="button">Ver evento</a></td>
                                    </tr>
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="3" class="text-center">No se encontraron eventos</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
            
        
    </div>
</div>

<%- include('footer') %>
